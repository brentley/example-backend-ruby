---
environments:
  - name: acceptance
  - name: backend
    vpcTarget:
        vpcId: vpc-f8ac8980            # The id of the VPC to launch ECS container instances into
        instanceSubnetIds:          # The list of subnets to use for ECS container instances
          - subnet-91cb46be
          - subnet-aba0e8e0
          - subnet-624bcd3f
        elbSubnetIds:               # The list of subnets to use for ELBs
          - subnet-ecd954c3
          - subnet-e0bdf5ab
          - subnet-5c48ce01
    cluster:
      keyName: macbook
    loadbalancer:
      internal: true
      hostedzone: internal.service
    provider: ecs-fargate
service:
  desiredCount: 3
  port: 4567
  pathPatterns:
  - /*
  healthEndpoint: /health
  networkMode: awsvpc
  deploymentConfiguration:
    minimumHealthyPercent: 100
    maximumPercent: 200
  pipeline:
    source:
      repo: brentley/example-backend
    build:
      disabled: false
    acceptance:
      disabled: false
      environment: backend
    production:
      disabled: true
  database:
templates:
  mu-service-example-backend-backend:
    Resources:
      EcsService:
        Properties:
          DeploymentConfiguration:
            MaximumPercent: 200
            MinimumHealthyPercent: 100
